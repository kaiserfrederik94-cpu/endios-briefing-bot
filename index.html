<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stadtwerke Briefing Bot Â· endios Sales Copilot</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@400;500&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap');

  :root {
    --bg: #f5f3ee;
    --surface: #ffffff;
    --surface2: #eeeae3;
    --border: #ddd9d0;
    --accent: #1a472a;
    --accent-light: #2d7a47;
    --accent2: #e86c2f;
    --text: #1a1a1a;
    --text-muted: #6b6860;
    --text-dim: #b0aca4;
    --shadow: 0 2px 16px rgba(0,0,0,0.08);
    --shadow-lg: 0 8px 40px rgba(0,0,0,0.12);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
  }

  /* Subtle paper texture */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    max-width: 820px;
    margin: 0 auto;
    padding: 0 24px 80px;
  }

  /* HEADER */
  header {
    padding: 52px 0 40px;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 24px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 40px;
  }

  .header-left {}

  .eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--accent-light);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 14px;
  }

  .eyebrow-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--accent2);
  }

  h1 {
    font-family: 'Syne', sans-serif;
    font-size: clamp(30px, 5vw, 46px);
    font-weight: 800;
    line-height: 1.05;
    letter-spacing: -1.5px;
    color: var(--text);
  }

  h1 em {
    font-style: normal;
    color: var(--accent2);
  }

  .subtitle {
    font-size: 15px;
    color: var(--text-muted);
    font-weight: 300;
    margin-top: 12px;
    line-height: 1.65;
    max-width: 420px;
  }

  .header-badge {
    flex-shrink: 0;
    background: var(--accent);
    color: #fff;
    border-radius: 14px;
    padding: 16px 20px;
    text-align: center;
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    line-height: 1.9;
    letter-spacing: 0.5px;
  }

  .header-badge strong {
    display: block;
    font-family: 'Syne', sans-serif;
    font-size: 18px;
    font-weight: 800;
    letter-spacing: -0.5px;
    color: #fff;
  }

  /* INPUT SECTION */
  .input-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 32px;
    box-shadow: var(--shadow);
    margin-bottom: 28px;
  }

  .section-label {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 16px;
  }

  .url-input-row {
    display: flex;
    gap: 10px;
    margin-bottom: 16px;
  }

  .url-input {
    flex: 1;
    background: var(--bg);
    border: 1.5px solid var(--border);
    border-radius: 12px;
    padding: 14px 18px;
    font-family: 'DM Mono', monospace;
    font-size: 14px;
    color: var(--text);
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .url-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(26,71,42,0.08);
  }

  .url-input::placeholder { color: var(--text-dim); }

  .btn-analyze {
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 14px 24px;
    font-family: 'Syne', sans-serif;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .btn-analyze:hover {
    background: var(--accent-light);
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(26,71,42,0.25);
  }

  .btn-analyze:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .example-chips {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
  }

  .example-label {
    font-size: 12px;
    color: var(--text-dim);
    font-family: 'DM Mono', monospace;
  }

  .chip {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 5px 12px;
    font-size: 12px;
    color: var(--text-muted);
    cursor: pointer;
    font-family: 'DM Mono', monospace;
    transition: all 0.2s;
  }

  .chip:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: rgba(26,71,42,0.05);
  }

  /* API KEY */
  .api-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px 24px;
    margin-bottom: 28px;
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
  }

  .api-label {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
    letter-spacing: 1px;
    white-space: nowrap;
  }

  .api-input {
    flex: 1;
    min-width: 200px;
    background: var(--bg);
    border: 1.5px solid var(--border);
    border-radius: 10px;
    padding: 10px 14px;
    font-family: 'DM Mono', monospace;
    font-size: 13px;
    color: var(--text);
    outline: none;
    transition: border-color 0.2s;
  }

  .api-input:focus { border-color: var(--accent); }

  .api-status {
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    color: var(--accent-light);
    white-space: nowrap;
  }

  .api-status.error { color: var(--accent2); }

  /* LOADING */
  .loading-section {
    display: none;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 48px 32px;
    text-align: center;
    margin-bottom: 28px;
    box-shadow: var(--shadow);
  }

  .loading-section.active { display: block; }

  .spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--border);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 20px;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  .loading-steps {
    display: flex;
    flex-direction: column;
    gap: 8px;
    max-width: 320px;
    margin: 0 auto;
  }

  .loading-step {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 13px;
    color: var(--text-dim);
    font-family: 'DM Mono', monospace;
    transition: color 0.3s;
  }

  .loading-step.active { color: var(--accent); }
  .loading-step.done { color: var(--text-muted); }

  .step-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--border);
    flex-shrink: 0;
    transition: background 0.3s;
  }

  .loading-step.active .step-dot { background: var(--accent); animation: pulse 1s infinite; }
  .loading-step.done .step-dot { background: var(--accent-light); }

  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }

  /* RESULTS */
  .results-section {
    display: none;
    animation: fadeUp 0.5s ease;
  }

  .results-section.active { display: block; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .result-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
    margin-bottom: 24px;
  }

  .result-title {
    font-family: 'Syne', sans-serif;
    font-size: 24px;
    font-weight: 800;
    letter-spacing: -0.5px;
  }

  .result-meta {
    font-size: 13px;
    color: var(--text-muted);
    margin-top: 4px;
  }

  .result-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    overflow: hidden;
    margin-bottom: 16px;
    box-shadow: var(--shadow);
    animation: fadeUp 0.4s ease both;
  }

  .result-card:nth-child(1) { animation-delay: 0.05s; }
  .result-card:nth-child(2) { animation-delay: 0.1s; }
  .result-card:nth-child(3) { animation-delay: 0.15s; }
  .result-card:nth-child(4) { animation-delay: 0.2s; }

  .card-header {
    padding: 18px 24px;
    border-bottom: 1px solid var(--border);
    background: var(--surface2);
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .card-icon {
    width: 32px; height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    flex-shrink: 0;
  }

  .card-icon.green { background: rgba(26,71,42,0.1); }
  .card-icon.orange { background: rgba(232,108,47,0.1); }
  .card-icon.blue { background: rgba(59,130,246,0.1); }
  .card-icon.purple { background: rgba(139,92,246,0.1); }

  .card-title {
    font-family: 'Syne', sans-serif;
    font-size: 15px;
    font-weight: 700;
  }

  .card-body {
    padding: 24px;
  }

  /* BRIEFING BULLETS */
  .briefing-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .briefing-list li {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    font-size: 14px;
    line-height: 1.65;
  }

  .bullet-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--accent);
    flex-shrink: 0;
    margin-top: 8px;
  }

  /* SCORE GRID */
  .score-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }

  .score-item {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 14px;
    text-align: center;
  }

  .score-val {
    font-family: 'Syne', sans-serif;
    font-size: 26px;
    font-weight: 800;
    line-height: 1;
    margin-bottom: 4px;
  }

  .score-val.high { color: var(--accent-light); }
  .score-val.mid { color: var(--accent2); }
  .score-val.low { color: #e53e3e; }

  .score-label {
    font-size: 11px;
    color: var(--text-muted);
    font-family: 'DM Mono', monospace;
    letter-spacing: 0.5px;
  }

  /* ICEBREAKER */
  .icebreaker-box {
    background: var(--accent);
    border-radius: 14px;
    padding: 24px;
    color: #fff;
    position: relative;
    overflow: hidden;
  }

  .icebreaker-box::before {
    content: '"';
    position: absolute;
    top: -10px;
    left: 16px;
    font-family: 'Syne', sans-serif;
    font-size: 100px;
    color: rgba(255,255,255,0.08);
    font-weight: 800;
    line-height: 1;
    pointer-events: none;
  }

  .icebreaker-text {
    font-size: 15px;
    line-height: 1.75;
    position: relative;
    font-style: italic;
    font-weight: 300;
  }

  .copy-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin-top: 16px;
    background: rgba(255,255,255,0.15);
    border: 1px solid rgba(255,255,255,0.25);
    color: #fff;
    border-radius: 8px;
    padding: 7px 14px;
    font-size: 12px;
    font-family: 'DM Mono', monospace;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
  }

  .copy-btn:hover { background: rgba(255,255,255,0.25); }

  /* TAGS */
  .tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 16px;
  }

  .tag {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 4px 12px;
    font-size: 12px;
    font-family: 'DM Mono', monospace;
    color: var(--text-muted);
  }

  .tag.found {
    background: rgba(26,71,42,0.07);
    border-color: rgba(26,71,42,0.25);
    color: var(--accent);
  }

  /* RESET BTN */
  .reset-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 18px;
    font-family: 'Syne', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s;
    margin-top: 8px;
  }

  .reset-btn:hover {
    border-color: var(--accent);
    color: var(--accent);
  }

  /* ERROR */
  .error-card {
    background: #fff5f5;
    border: 1px solid #feb2b2;
    border-radius: 16px;
    padding: 24px;
    color: #c53030;
    font-size: 14px;
    font-family: 'DM Mono', monospace;
    margin-bottom: 16px;
  }
</style>
</head>
<body>
<div class="container">

  <header>
    <div class="header-left">
      <div class="eyebrow">
        <div class="eyebrow-dot"></div>
        Sales Copilot Â· Bewerbungs-Demo
      </div>
      <h1>Stadtwerke<br><em>Briefing Bot</em></h1>
      <p class="subtitle">Website eingeben. In Sekunden weiÃŸt du alles was du fÃ¼r den perfekten Sales-Call brauchst.</p>
    </div>
    <div class="header-badge">
      <strong>endios</strong>
      AI Process<br>Manager<br>Hamburg
    </div>
  </header>

  <!-- API KEY -->
  <div class="api-section" id="apiSection">
    <span class="api-label">API KEY</span>
    <input type="password" class="api-input" id="apiKey" placeholder="sk-ant-..." />
    <button onclick="saveKey()" style="background: var(--accent); color: #fff; border: none; border-radius: 8px; padding: 10px 16px; font-family: Syne, sans-serif; font-size: 13px; font-weight: 700; cursor: pointer;">Speichern</button>
    <span class="api-status" id="apiStatus"></span>
  </div>

  <!-- INPUT -->
  <div class="input-section">
    <div class="section-label">Stadtwerk-Website eingeben</div>
    <div class="url-input-row">
      <input type="text" class="url-input" id="urlInput" placeholder="z.B. stadtwerke-musterburg.de" />
      <button class="btn-analyze" id="analyzeBtn" onclick="startAnalysis()">
        <span id="btnIcon">âš¡</span> Briefing erstellen
      </button>
    </div>
    <div class="example-chips">
      <span class="example-label">Beispiele:</span>
      <span class="chip" onclick="setUrl('stadtwerke-karlsruhe.de')">SW Karlsruhe</span>
      <span class="chip" onclick="setUrl('swu.de')">SWU Ulm</span>
      <span class="chip" onclick="setUrl('stadtwerke-muenster.de')">SW MÃ¼nster</span>
      <span class="chip" onclick="setUrl('e-werk-sachsenwald.de')">E-Werk Sachsenwald</span>
    </div>
  </div>

  <!-- LOADING -->
  <div class="loading-section" id="loadingSection">
    <div class="spinner"></div>
    <div class="loading-steps">
      <div class="loading-step" id="step1"><div class="step-dot"></div>Website wird gescannt...</div>
      <div class="loading-step" id="step2"><div class="step-dot"></div>Digitalisierungssignale analysieren...</div>
      <div class="loading-step" id="step3"><div class="step-dot"></div>Briefing wird generiert...</div>
      <div class="loading-step" id="step4"><div class="step-dot"></div>Icebreaker formulieren...</div>
    </div>
  </div>

  <!-- RESULTS -->
  <div class="results-section" id="resultsSection">
    <div class="result-header">
      <div>
        <div class="result-title" id="resultTitle">Stadtwerke Musterburg</div>
        <div class="result-meta" id="resultMeta">Briefing erstellt Â· Bereit fÃ¼r den Call</div>
      </div>
      <button class="reset-btn" onclick="reset()">â†º Neues Briefing</button>
    </div>

    <!-- Score Grid -->
    <div class="result-card">
      <div class="card-header">
        <div class="card-icon green">ðŸ“Š</div>
        <span class="card-title">Sales-Potenzial auf einen Blick</span>
      </div>
      <div class="card-body">
        <div class="score-grid" id="scoreGrid"></div>
      </div>
    </div>

    <!-- Briefing Bullets -->
    <div class="result-card">
      <div class="card-header">
        <div class="card-icon blue">ðŸ“‹</div>
        <span class="card-title">Kompakt-Briefing</span>
      </div>
      <div class="card-body">
        <ul class="briefing-list" id="briefingList"></ul>
        <div class="tags" id="signalTags"></div>
      </div>
    </div>

    <!-- Icebreaker -->
    <div class="result-card">
      <div class="card-header">
        <div class="card-icon orange">ðŸ’¬</div>
        <span class="card-title">GesprÃ¤chseinstieg fÃ¼r den Call</span>
      </div>
      <div class="card-body">
        <div class="icebreaker-box">
          <div class="icebreaker-text" id="icebreakerText"></div>
          <button class="copy-btn" onclick="copyIcebreaker()">
            <span id="copyIcon">âŽ˜</span> Kopieren
          </button>
        </div>
      </div>
    </div>

    <!-- Empfehlung -->
    <div class="result-card">
      <div class="card-header">
        <div class="card-icon purple">ðŸŽ¯</div>
        <span class="card-title">endios-Empfehlung</span>
      </div>
      <div class="card-body">
        <div id="recommendationText" style="font-size: 14px; line-height: 1.75; color: var(--text-muted);"></div>
      </div>
    </div>

  </div>

  <div id="errorCard" style="display:none;"></div>

</div>

<script>
let apiKey = '';
let currentIcebreaker = '';

function saveKey() {
  const val = document.getElementById('apiKey').value.trim();
  const status = document.getElementById('apiStatus');
  if (!val.startsWith('sk-ant-')) {
    status.textContent = 'âœ— UngÃ¼ltiger Key';
    status.className = 'api-status error';
    return;
  }
  apiKey = val;
  status.textContent = 'âœ“ Gespeichert';
  status.className = 'api-status';
}

function setUrl(url) {
  document.getElementById('urlInput').value = url;
}

function reset() {
  document.getElementById('resultsSection').classList.remove('active');
  document.getElementById('errorCard').style.display = 'none';
  document.getElementById('urlInput').value = '';
  document.getElementById('urlInput').focus();
}

async function startAnalysis() {
  if (!apiKey) {
    alert('Bitte zuerst den Anthropic API Key eingeben.');
    document.getElementById('apiKey').focus();
    return;
  }

  let url = document.getElementById('urlInput').value.trim();
  if (!url) { document.getElementById('urlInput').focus(); return; }
  if (!url.startsWith('http')) url = 'https://' + url;

  // UI: loading state
  document.getElementById('analyzeBtn').disabled = true;
  document.getElementById('resultsSection').classList.remove('active');
  document.getElementById('errorCard').style.display = 'none';
  document.getElementById('loadingSection').classList.add('active');

  animateSteps();

  const prompt = `Du bist ein Sales-Intelligence-Assistent fÃ¼r endios, den deutschen MarktfÃ¼hrer fÃ¼r Smart Energy & Smart City Apps fÃ¼r Stadtwerke und Energieversorger.

Ein endios-Vertriebsmitarbeiter mÃ¶chte das Stadtwerk unter folgender URL anrufen: ${url}

Analysiere dieses Stadtwerk und erstelle ein Sales-Briefing. Nutze dein Wissen Ã¼ber deutsche Stadtwerke, die Energiewirtschaft und typische Digitalisierungsthemen in diesem Sektor.

Antworte NUR mit validem JSON in diesem exakten Format:
{
  "name": "Offizieller Name des Stadtwerks",
  "ort": "Stadt/Region",
  "score_digitalisierung": 75,
  "score_app_potenzial": 80,
  "score_nachhaltigkeitsfokus": 65,
  "briefing_punkte": [
    "Konkreter Fakt oder EinschÃ¤tzung Ã¼ber das Stadtwerk",
    "Aktuelles Thema oder Projekt bei diesem Versorger",
    "Relevante Info zur digitalen Infrastruktur oder Kundenkommunikation",
    "Wettbewerbssituation oder Marktstellung",
    "Besonderheit die im GesprÃ¤ch relevant sein kÃ¶nnte"
  ],
  "gefundene_signale": ["App", "Kundenportal", "E-MobilitÃ¤t", "HEMS"],
  "fehlende_signale": ["Loyalty", "Smart Meter Integration"],
  "icebreaker": "GesprÃ¤chseinstieg auf Deutsch, persÃ¶nlich, bezogen auf ein konkretes Thema dieses Stadtwerks. ErwÃ¤hne einen spezifischen Aspekt und leite natÃ¼rlich zu endios Ã¼ber. Ca. 3-4 SÃ¤tze.",
  "empfehlung": "Welches endios-Modul passt am besten und warum? Konkrete Argumentation fÃ¼r den Vertriebsmitarbeiter, 2-3 SÃ¤tze."
}

Die Scores sind Prozentwerte 0-100. Sei realistisch und spezifisch â€“ generische Antworten helfen dem Vertrieb nicht.`;

  try {
    const res = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': apiKey,
        'anthropic-version': '2023-06-01',
        'anthropic-dangerous-direct-browser-access': 'true'
      },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1200,
        messages: [{ role: 'user', content: prompt }]
      })
    });

    const data = await res.json();
    if (data.error) throw new Error(data.error.message);

    const text = data.content[0].text;
    const clean = text.replace(/```json|```/g, '').trim();
    const json = JSON.parse(clean);

    renderResults(json, url);

  } catch (err) {
    document.getElementById('loadingSection').classList.remove('active');
    const errEl = document.getElementById('errorCard');
    errEl.style.display = 'block';
    errEl.innerHTML = `<div class="error-card">Fehler: ${err.message}</div>`;
  }

  document.getElementById('analyzeBtn').disabled = false;
}

let stepTimer;
function animateSteps() {
  const steps = ['step1','step2','step3','step4'];
  let i = 0;
  steps.forEach(s => {
    document.getElementById(s).className = 'loading-step';
  });
  stepTimer = setInterval(() => {
    if (i > 0) document.getElementById(steps[i-1]).className = 'loading-step done';
    if (i < steps.length) {
      document.getElementById(steps[i]).className = 'loading-step active';
      i++;
    }
  }, 900);
}

function renderResults(d, url) {
  clearInterval(stepTimer);
  document.getElementById('loadingSection').classList.remove('active');

  document.getElementById('resultTitle').textContent = d.name || url;
  document.getElementById('resultMeta').textContent = `${d.ort || ''} Â· Briefing erstellt Â· Bereit fÃ¼r den Call`;

  // Scores
  function scoreClass(v) { return v >= 70 ? 'high' : v >= 40 ? 'mid' : 'low'; }
  document.getElementById('scoreGrid').innerHTML = `
    <div class="score-item">
      <div class="score-val ${scoreClass(d.score_digitalisierung)}">${d.score_digitalisierung}%</div>
      <div class="score-label">Digitalisierung</div>
    </div>
    <div class="score-item">
      <div class="score-val ${scoreClass(d.score_app_potenzial)}">${d.score_app_potenzial}%</div>
      <div class="score-label">App-Potenzial</div>
    </div>
    <div class="score-item">
      <div class="score-val ${scoreClass(d.score_nachhaltigkeitsfokus)}">${d.score_nachhaltigkeitsfokus}%</div>
      <div class="score-label">Nachhaltigkeit</div>
    </div>
  `;

  // Briefing
  const list = document.getElementById('briefingList');
  list.innerHTML = (d.briefing_punkte || []).map(p => `
    <li><div class="bullet-dot"></div><span>${p}</span></li>
  `).join('');

  // Signal Tags
  const tags = document.getElementById('signalTags');
  const found = (d.gefundene_signale || []).map(t => `<span class="tag found">âœ“ ${t}</span>`).join('');
  const missing = (d.fehlende_signale || []).map(t => `<span class="tag">âœ— ${t}</span>`).join('');
  tags.innerHTML = found + missing;

  // Icebreaker
  currentIcebreaker = d.icebreaker || '';
  document.getElementById('icebreakerText').textContent = currentIcebreaker;

  // Empfehlung
  document.getElementById('recommendationText').textContent = d.empfehlung || '';

  document.getElementById('resultsSection').classList.add('active');
  document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function copyIcebreaker() {
  navigator.clipboard.writeText(currentIcebreaker).then(() => {
    const btn = document.querySelector('.copy-btn');
    const icon = document.getElementById('copyIcon');
    icon.textContent = 'âœ“';
    btn.style.background = 'rgba(255,255,255,0.3)';
    setTimeout(() => {
      icon.textContent = 'âŽ˜';
      btn.style.background = '';
    }, 2000);
  });
}

document.getElementById('urlInput').addEventListener('keydown', e => {
  if (e.key === 'Enter') startAnalysis();
});
</script>
</body>
</html>
